server:
  port: 8082

spring:
  application:
    name: hdt-digitaltwin-server
  
  # H2 Database 설정
  datasource:
    url: jdbc:h2:mem:digitaltwin
    driver-class-name: org.h2.Driver
    username: sa
    password:
  
  h2:
    console:
      enabled: true
      path: /h2-console
      settings:
        trace: false
        web-allow-others: true
  
  jpa:
    hibernate:
      ddl-auto: create  # 테이블 자동 생성
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
    defer-datasource-initialization: true  # JPA 테이블 생성 후 data.sql 실행

  sql:
    init:
      mode: always  # data.sql 실행

# JWT 설정 (관제 시스템 최적화)
jwt:
  secret: hdt-digitaltwin-secret-key-2026-hanaDream-security-token-key-minimum-256-bits
  expiration: 1800000              # Access Token: 30분
  refresh-expiration: 7776000000   # Refresh Token: 90일

# 비밀번호 정책
password:
  change-period-days: 90
  min-length: 8
  require-special-char: true
  require-number: true
  require-uppercase: true

# 인증 및 세션 정책
auth:
  max-devices-per-user: 10
  allow-concurrent-sessions: true

management:
  endpoint:
    web:
      exposure:
        include: health, info
  info:
    env:
      enabled: true

# 로깅 설정
logging:
  level:
    com.mpole.hdt.digitaltwin: INFO
    org.springframework.security: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
